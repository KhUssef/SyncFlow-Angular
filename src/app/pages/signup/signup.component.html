<div class="login-container">
  <form class="login-form" [formGroup]="signupForm" (ngSubmit)="onSignup()" *ngIf="!showErrorMessage()">
    <h2 class="title">Company Sign Up</h2>

    <div *ngIf="showErrorMessage()" class="error-message">{{ ErrorMessage() }}</div>

    <div class="form-group">
      <label>Company Name</label>
      <input type="text" id="company" formControlName="companyName" placeholder="Enter company name" />
      <div class="error-message" *ngIf="companyName?.invalid && companyName?.touched">
        <span *ngIf="companyName?.errors?.['required']">Company name is required</span>
        <span *ngIf="companyName?.errors?.['companyExists']">Company name already exists</span>
        <span *ngIf="companyName?.errors?.['serverError']">Error checking company name availability</span>
      </div>
      <div class="validating" *ngIf="companyName?.pending">
        Checking availability...
      </div>
    </div>

    <div class="form-group">
      <label>Manager Username</label>
      <input type="text" id="username" formControlName="username" placeholder="Enter username" />
      <div class="error-message" *ngIf="username?.invalid && username?.touched">
        <span *ngIf="username?.errors?.['required']">Username is required</span>
        <span *ngIf="username?.errors?.['minlength']">Username must be at least 3 characters</span>
      </div>
    </div>

    <div class="form-group">
      <label>Manager Password</label>
      <input type="password" id="password" formControlName="password" placeholder="Enter password" />
      <div class="error-message" *ngIf="password?.invalid && password?.touched">
        <span *ngIf="password?.errors?.['required']">Password is required</span>
        <span *ngIf="password?.errors?.['minlength']">Password must be at least 6 characters</span>
      </div>
    </div>

    <button [disabled]="!formValid() || isSubmitting()" type="submit" class="login-button">
      <span *ngIf="!isSubmitting()">Register Company</span>
      <span *ngIf="isSubmitting()">Creating...</span>
    </button>

    <div class="no-account">
      <p>
        Already have an account? <a (click)="renavigateToLogin()" style="cursor: pointer;">Login</a>
      </p>
    </div>
  </form>
  <div class="logo-container">
    <img src="/Login.jpg" alt="Logo" class="logo" />
  </div>

  <!-- Custom Modal -->
  <div *ngIf="showModal()" class="modal-overlay">
    <div class="modal">
      <h2>Registration Successful!</h2>
      <p>Your company has been registered successfully.</p>
      <p>Your company code is: <strong>{{ companyCode() }}</strong></p>
      <p>Please keep this code safe as you'll need it for future reference.</p>
      <button (click)="closeModal()" class="login-button">Close</button>
    </div>
  </div>
</div>